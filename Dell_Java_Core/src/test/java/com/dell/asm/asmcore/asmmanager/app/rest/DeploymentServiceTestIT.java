package com.dell.asm.asmcore.asmmanager.app.rest;

import com.dell.asm.asmcore.asmmanager.client.deployment.Deployment;
import com.dell.asm.rest.test.utils.ClientUtils;
import com.dell.pg.orion.common.utilities.MarshalUtil;
import com.dell.pg.orion.common.utilities.PingUtil;

import org.apache.cxf.jaxrs.client.*;
import org.junit.Test;

import javax.ws.rs.core.MediaType;

import java.util.LinkedList;
import java.util.List;

public class DeploymentServiceTestIT {

    @Test
    public void testDeploy() {
        String json = "{\"Deployment\":{\"id\":\"1000\",\"templateName\":\"Default Template\",\"templateDescription\":\"Default Template Description\",\"createdBy\":\"Administrator\",\"updatedBy\":\"Administrator\",\"components\":[{\"id\":\"62d21c7f-f018-4844-9234-4feba75e5e4e\",\"type\":\"STORAGE\",\"relatedComponents\":{},\"resources\":[{\"id\":\"StorageCategory_1\",\"displayName\":\"Storage Settings\",\"parameters\":[{\"type\":\"STRING\",\"displayName\":\"Storage Volume\",\"id\":\"StorageVolume\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true}]}],\"name\":\"Storage\"},{\"id\":\"component-compellent-1\",\"type\":\"STORAGE\",\"relatedComponents\":{},\"resources\":[{\"id\":\"asm::volume::compellent\",\"displayName\":\"Compellent Storage Settings\",\"parameters\":[{\"type\":\"STRING\",\"displayName\":\"Storage Volume\",\"id\":\"title\",\"value\":\"\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"Storage Size e.g 100g\",\"id\":\"size\",\"value\":\"\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"Boot Volume\",\"id\":\"boot\",\"value\":\"false\",\"possibleValues\":[\"true\",\"false\"],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"Volume Folder\",\"id\":\"volumefolder\",\"value\":\"\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":false},{\"type\":\"STRING\",\"displayName\":\"Purge Volume\",\"id\":\"purge\",\"value\":\"yes\",\"possibleValues\":[\"yes\",\"no\"],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"Volume Notes\",\"id\":\"volume_notes\",\"value\":\"\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":false},{\"type\":\"STRING\",\"displayName\":\"Replay Profile\",\"id\":\"replayprofile\",\"value\":\"\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":false},{\"type\":\"STRING\",\"displayName\":\"Storage Profile Name\",\"id\":\"storageprofile\",\"value\":\"\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":false},{\"type\":\"STRING\",\"displayName\":\"Server Notes\",\"id\":\"server_notes\",\"value\":\"\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":false},{\"type\":\"STRING\",\"displayName\":\"Server Object Name\",\"id\":\"servername\",\"value\":\"\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":false},{\"type\":\"STRING\",\"displayName\":\"Operating System Name\",\"id\":\"operatingsystem\",\"value\":\"VMware ESX 5.1\",\"possibleValues\":[\"VMware ESX 5.1\",\"VMware ESX 5.0\",\"VMware ESX 5.5\"],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"Server Object Folder\",\"id\":\"serverfolder\",\"value\":\"\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":false},{\"type\":\"STRING\",\"displayName\":\"Server WWPN Values\",\"id\":\"wwn\",\"value\":\"\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":false},{\"type\":\"STRING\",\"displayName\":\"Port Type\",\"id\":\"porttype\",\"value\":\"FibreChannel\",\"possibleValues\":[\"FibreChannel\",\"iSCSI\"],\"possibleValuesDisplayName\":[],\"required\":false},{\"type\":\"STRING\",\"displayName\":\"Manual\",\"id\":\"manual\",\"value\":\"false\",\"possibleValues\":[\"true\",\"false\"],\"possibleValuesDisplayName\":[],\"required\":false},{\"type\":\"STRING\",\"displayName\":\"Force Map\",\"id\":\"force\",\"value\":\"false\",\"possibleValues\":[\"true\",\"false\"],\"possibleValuesDisplayName\":[],\"required\":false},{\"type\":\"STRING\",\"displayName\":\"Map Read Only\",\"id\":\"readonly\",\"value\":\"false\",\"possibleValues\":[\"true\",\"false\"],\"possibleValuesDisplayName\":[],\"required\":false},{\"type\":\"STRING\",\"displayName\":\"Single Path Map\",\"id\":\"singlepath\",\"value\":\"false\",\"possibleValues\":[\"true\",\"false\"],\"possibleValuesDisplayName\":[],\"required\":false},{\"type\":\"ENUMERATED\",\"displayName\":\"Target Compellent\",\"id\":\"TargetCompellent\",\"possibleValues\":[\"compellent-172.17.10.40\"],\"possibleValuesDisplayName\":[\"24260\"],\"required\":true}]}],\"name\":\"Compellent\"},{\"id\":\"component-equallogic-iqn-1\",\"type\":\"STORAGE\",\"relatedComponents\":{},\"resources\":[{\"id\":\"equallogic::create_vol_iqnorip_access\",\"displayName\":\"Storage Settings\",\"parameters\":[{\"type\":\"STRING\",\"displayName\":\"Storage Volume\",\"id\":\"title\",\"value\":\"my_volume\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"Storage Pool\",\"id\":\"poolname\",\"value\":\"default\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":false},{\"type\":\"INTEGER\",\"displayName\":\"Storage Size\",\"id\":\"size\",\"value\":\"\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"Thin Provisioning\",\"id\":\"thinprovision\",\"value\":\"enable\",\"possibleValues\":[\"enable\",\"disable\"],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"Snapshot Reserve %\",\"id\":\"snapreserve\",\"value\":\"100%\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"Thin Min Reserve %\",\"id\":\"thinminreserve\",\"value\":\"10%\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"Thin growth Warning %\",\"id\":\"thingrowthwarn\",\"value\":\"60%\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"Thin growth Maximum %\",\"id\":\"thingrowthmax\",\"value\":\"100%\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"Thin warning on threshold %\",\"id\":\"thinwarnsoftthres\",\"value\":\"60%\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"Thin warning hard threshold %\",\"id\":\"thinwarnhardthres\",\"value\":\"90%\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"Multi-Host access of volume\",\"id\":\"multihostaccess\",\"value\":\"enable\",\"possibleValues\":[\"enable\",\"disable\"],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"Initiator IQN or IP Address\",\"id\":\"iqnOrIP\",\"value\":\"\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"ENUMERATED\",\"displayName\":\"Target EqualLogic\",\"id\":\"TargetEqualLogic\",\"possibleValues\":[\"equallogic-172.17.15.10\"],\"possibleValuesDisplayName\":[\"AS800-EQL-1510\"],\"required\":true}]}],\"name\":\"EqualLogic IQN\"},{\"id\":\"component-equallogic-chap-1\",\"type\":\"STORAGE\",\"relatedComponents\":{},\"resources\":[{\"id\":\"asm::volume::equallogic\",\"displayName\":\"Storage Settings\",\"parameters\":[{\"type\":\"STRING\",\"displayName\":\"Storage Volume\",\"id\":\"title\",\"value\":\"my_volume\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"Storage Pool\",\"id\":\"poolname\",\"value\":\"default\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":false},{\"type\":\"INTEGER\",\"displayName\":\"Storage Size\",\"id\":\"size\",\"value\":\"\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"Thin Provisioning\",\"id\":\"thinprovision\",\"value\":\"enable\",\"possibleValues\":[\"enable\",\"disable\"],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"Snapshot Reserve %\",\"id\":\"snapreserve\",\"value\":\"100%\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"Thin Min Reserve %\",\"id\":\"thinminreserve\",\"value\":\"10%\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"Thin growth Warning %\",\"id\":\"thingrowthwarn\",\"value\":\"60%\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"Thin growth Maximum %\",\"id\":\"thingrowthmax\",\"value\":\"100%\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"Thin warning on threshold %\",\"id\":\"thinwarnsoftthres\",\"value\":\"60%\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"Thin warning hard threshold %\",\"id\":\"thinwarnhardthres\",\"value\":\"90%\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"Multi-Host access of volume\",\"id\":\"multihostaccess\",\"value\":\"enable\",\"possibleValues\":[\"enable\",\"disable\"],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"Chap Username\",\"id\":\"chap_user_name\",\"value\":\"\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"PASSWORD\",\"displayName\":\"Chap Secret\",\"id\":\"passwd\",\"value\":\"\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"ENUMERATED\",\"displayName\":\"Target EqualLogic\",\"id\":\"TargetEqualLogic\",\"possibleValues\":[\"equallogic-172.17.15.10\"],\"possibleValuesDisplayName\":[\"AS800-EQL-1510\"],\"required\":true}]}],\"name\":\"EqualLogic Chap\"},{\"id\":\"faafffb7-6dde-4366-ad56-4c729dd2f057\",\"type\":\"SERVER\",\"relatedComponents\":{\"62d21c7f-f018-4844-9234-4feba75e5e4e\":\"Storage\"},\"resources\":[{\"id\":\"ServerCategory_1\",\"displayName\":\"Hardware Settings\",\"parameters\":[{\"type\":\"ENUMERATED\",\"displayName\":\"Target Boot Device\",\"id\":\"TargetBootDevice\",\"value\":\"HD\",\"possibleValues\":[\"SD\",\"HD\"],\"possibleValuesDisplayName\":[\"SD Card\",\"Local Hard Drive\"],\"required\":true},{\"type\":\"ENUMERATED\",\"displayName\":\"Server Pool\",\"id\":\"ServerPool\",\"value\":\"-1\",\"possibleValues\":[\"-1\"],\"possibleValuesDisplayName\":[\"Global\"],\"required\":true}]},{\"id\":\"ServerCategory_2\",\"displayName\":\"OS Settings\",\"parameters\":[{\"type\":\"ENUMERATED\",\"displayName\":\"Identity Pool\",\"id\":\"IdentityPool\",\"value\":\"-1\",\"possibleValues\":[\"-1\"],\"possibleValuesDisplayName\":[\"Global\"],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"Host Name\",\"id\":\"OSHostName\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"ENUMERATED\",\"displayName\":\"Hypervisor Management Network\",\"id\":\"HypervisorNetwork\",\"value\":\"-1\",\"possibleValues\":[\"-1\"],\"possibleValuesDisplayName\":[\"Select...\"],\"required\":true},{\"type\":\"ENUMERATED\",\"displayName\":\"Hypervisor vMotion Network\",\"id\":\"VMotionNetwork\",\"value\":\"-1\",\"possibleValues\":[\"-1\"],\"possibleValuesDisplayName\":[\"Select...\"],\"required\":true},{\"type\":\"ENUMERATED\",\"displayName\":\"Storage Network\",\"id\":\"StorageNetwork\",\"value\":\"-1\",\"possibleValues\":[\"-1\"],\"possibleValuesDisplayName\":[\"Select...\"],\"required\":true},{\"type\":\"LIST\",\"displayName\":\"Workload Networks\",\"id\":\"WorkloadNetwork\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"PASSWORD\",\"displayName\":\"Administrator password\",\"id\":\"AdminPassword\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"ENUMERATED\",\"displayName\":\"OS Image\",\"id\":\"RazorImage\",\"value\":\"-1\",\"possibleValues\":[\"-1\",\"esxi-5.1\"],\"possibleValuesDisplayName\":[\"Select...\",\"esxi-5.1\"],\"required\":true},{\"type\":\"ENUMERATED\",\"displayName\":\"OS Image Type\",\"id\":\"OSImageType\",\"value\":\"-1\",\"possibleValues\":[\"-1\",\"Linux\",\"Windows\",\"ESXi\"],\"possibleValuesDisplayName\":[\"Select...\",\"Linux\",\"Windows\",\"ESXi\"],\"required\":true},{\"type\":\"TEXT\",\"displayName\":\"Custom OS Installation script\",\"id\":\"CustomScript\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true}]}],\"name\":\"Server\"},{\"id\":\"c3320dae-35fe-4703-ace5-e1ca2675a5be\",\"type\":\"CLUSTER\",\"relatedComponents\":{\"faafffb7-6dde-4366-ad56-4c729dd2f057\":\"Server\"},\"resources\":[{\"id\":\"ClusterCategory_1\",\"displayName\":\"Cluster Settings\",\"parameters\":[{\"type\":\"ENUMERATED\",\"displayName\":\"Target vCenter\",\"id\":\"TargetVCenter\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"Data Center Name\",\"id\":\"DataCenter\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"Cluster Name\",\"id\":\"Cluster\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"Cluster Data Store\",\"id\":\"Datastore\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true}]}],\"name\":\"Cluster\"},{\"id\":\"d93edc9d-52ad-4f27-8f76-d06b845da4a4\",\"type\":\"VIRTUALMACHINE\",\"relatedComponents\":{\"c3320dae-35fe-4703-ace5-e1ca2675a5be\":\"Cluster\"},\"resources\":[{\"id\":\"VMCategory_1\",\"displayName\":\"Virtual Machine Settings\",\"parameters\":[{\"type\":\"INTEGER\",\"displayName\":\"Number of CPUs\",\"id\":\"VMCPU\",\"value\":\"1\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"min\":1,\"max\":8,\"required\":true},{\"type\":\"INTEGER\",\"displayName\":\"Memory in GB\",\"id\":\"VMMemory\",\"value\":\"8\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"min\":1,\"max\":256,\"required\":true},{\"type\":\"INTEGER\",\"displayName\":\"Number of NICs\",\"id\":\"VMNICs\",\"value\":\"1\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"min\":1,\"max\":16,\"required\":true}]},{\"id\":\"VMCategory_2\",\"displayName\":\"Virtual Machine OS Settings\",\"parameters\":[{\"type\":\"STRING\",\"displayName\":\"Host Name\",\"id\":\"VMHostName\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"PASSWORD\",\"displayName\":\"Administrator password\",\"id\":\"VMAdminPassword\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"ENUMERATED\",\"displayName\":\"OS Image\",\"id\":\"VMRazorImage\",\"value\":\"-1\",\"possibleValues\":[\"-1\"],\"possibleValuesDisplayName\":[\"Select...\"],\"required\":true},{\"type\":\"ENUMERATED\",\"displayName\":\"OS Image Type\",\"id\":\"VMOSImageType\",\"value\":\"-1\",\"possibleValues\":[\"-1\",\"Linux\",\"Windows\"],\"possibleValuesDisplayName\":[\"Select...\",\"Linux\",\"Windows\"],\"required\":true},{\"type\":\"TEXT\",\"displayName\":\"Custom OS Installation script\",\"id\":\"VMCustomScript\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true}]}],\"name\":\"Virtual Machine\"},{\"id\":\"ad84be34-fffe-4d07-bbba-df29e489b5c6\",\"type\":\"SERVICE\",\"relatedComponents\":{},\"resources\":[{\"id\":\"Puppet_0\",\"displayName\":\"Application Settings\",\"parameters\":[{\"type\":\"STRING\",\"displayName\":\"service_name\",\"id\":\"service_name\",\"value\":\"$apache::params::service_name\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"default_mods\",\"id\":\"default_mods\",\"value\":\"true\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"default_vhost\",\"id\":\"default_vhost\",\"value\":\"true\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"default_confd_files\",\"id\":\"default_confd_files\",\"value\":\"true\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"default_ssl_vhost\",\"id\":\"default_ssl_vhost\",\"value\":\"false\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"default_ssl_cert\",\"id\":\"default_ssl_cert\",\"value\":\"$apache::params::default_ssl_cert\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"default_ssl_key\",\"id\":\"default_ssl_key\",\"value\":\"$apache::params::default_ssl_key\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"default_ssl_chain\",\"id\":\"default_ssl_chain\",\"value\":\"undef\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"default_ssl_ca\",\"id\":\"default_ssl_ca\",\"value\":\"undef\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"default_ssl_crl_path\",\"id\":\"default_ssl_crl_path\",\"value\":\"undef\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"default_ssl_crl\",\"id\":\"default_ssl_crl\",\"value\":\"undef\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"ip\",\"id\":\"ip\",\"value\":\"undef\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"service_enable\",\"id\":\"service_enable\",\"value\":\"true\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"service_ensure\",\"id\":\"service_ensure\",\"value\":\"running\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"purge_configs\",\"id\":\"purge_configs\",\"value\":\"true\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"purge_vdir\",\"id\":\"purge_vdir\",\"value\":\"false\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"serveradmin\",\"id\":\"serveradmin\",\"value\":\"root@localhost\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"sendfile\",\"id\":\"sendfile\",\"value\":\"On\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"error_documents\",\"id\":\"error_documents\",\"value\":\"false\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"timeout\",\"id\":\"timeout\",\"value\":\"120\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"httpd_dir\",\"id\":\"httpd_dir\",\"value\":\"$apache::params::httpd_dir\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"server_root\",\"id\":\"server_root\",\"value\":\"$apache::params::server_root\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"confd_dir\",\"id\":\"confd_dir\",\"value\":\"$apache::params::confd_dir\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"vhost_dir\",\"id\":\"vhost_dir\",\"value\":\"$apache::params::vhost_dir\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"vhost_enable_dir\",\"id\":\"vhost_enable_dir\",\"value\":\"$apache::params::vhost_enable_dir\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"mod_dir\",\"id\":\"mod_dir\",\"value\":\"$apache::params::mod_dir\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"mod_enable_dir\",\"id\":\"mod_enable_dir\",\"value\":\"$apache::params::mod_enable_dir\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"mpm_module\",\"id\":\"mpm_module\",\"value\":\"$apache::params::mpm_module\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"conf_template\",\"id\":\"conf_template\",\"value\":\"$apache::params::conf_template\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"servername\",\"id\":\"servername\",\"value\":\"$apache::params::servername\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"manage_user\",\"id\":\"manage_user\",\"value\":\"true\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"manage_group\",\"id\":\"manage_group\",\"value\":\"true\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"user\",\"id\":\"user\",\"value\":\"$apache::params::user\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"group\",\"id\":\"group\",\"value\":\"$apache::params::group\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"keepalive\",\"id\":\"keepalive\",\"value\":\"$apache::params::keepalive\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"keepalive_timeout\",\"id\":\"keepalive_timeout\",\"value\":\"$apache::params::keepalive_timeout\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"logroot\",\"id\":\"logroot\",\"value\":\"$apache::params::logroot\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"log_level\",\"id\":\"log_level\",\"value\":\"$apache::params::log_level\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"ports_file\",\"id\":\"ports_file\",\"value\":\"$apache::params::ports_file\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"server_tokens\",\"id\":\"server_tokens\",\"value\":\"OS\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"server_signature\",\"id\":\"server_signature\",\"value\":\"On\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"trace_enable\",\"id\":\"trace_enable\",\"value\":\"On\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"package_ensure\",\"id\":\"package_ensure\",\"value\":\"installed\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true}]}],\"name\":\"apache\"},{\"id\":\"ad84be34-fffe-4d07-bbba-df29e489b5c6\",\"type\":\"SERVICE\",\"relatedComponents\":{},\"resources\":[{\"id\":\"Puppet_0\",\"displayName\":\"Application Settings\",\"parameters\":[{\"type\":\"STRING\",\"displayName\":\"service_name\",\"id\":\"service_name\",\"value\":\"$apache::params::service_name\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"default_mods\",\"id\":\"default_mods\",\"value\":\"true\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"default_vhost\",\"id\":\"default_vhost\",\"value\":\"true\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"default_confd_files\",\"id\":\"default_confd_files\",\"value\":\"true\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"default_ssl_vhost\",\"id\":\"default_ssl_vhost\",\"value\":\"false\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"default_ssl_cert\",\"id\":\"default_ssl_cert\",\"value\":\"$apache::params::default_ssl_cert\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"default_ssl_key\",\"id\":\"default_ssl_key\",\"value\":\"$apache::params::default_ssl_key\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"default_ssl_chain\",\"id\":\"default_ssl_chain\",\"value\":\"undef\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"default_ssl_ca\",\"id\":\"default_ssl_ca\",\"value\":\"undef\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"default_ssl_crl_path\",\"id\":\"default_ssl_crl_path\",\"value\":\"undef\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"default_ssl_crl\",\"id\":\"default_ssl_crl\",\"value\":\"undef\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"ip\",\"id\":\"ip\",\"value\":\"undef\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"service_enable\",\"id\":\"service_enable\",\"value\":\"true\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"service_ensure\",\"id\":\"service_ensure\",\"value\":\"running\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"purge_configs\",\"id\":\"purge_configs\",\"value\":\"true\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"purge_vdir\",\"id\":\"purge_vdir\",\"value\":\"false\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"serveradmin\",\"id\":\"serveradmin\",\"value\":\"root@localhost\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"sendfile\",\"id\":\"sendfile\",\"value\":\"On\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"error_documents\",\"id\":\"error_documents\",\"value\":\"false\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"timeout\",\"id\":\"timeout\",\"value\":\"120\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"httpd_dir\",\"id\":\"httpd_dir\",\"value\":\"$apache::params::httpd_dir\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"server_root\",\"id\":\"server_root\",\"value\":\"$apache::params::server_root\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"confd_dir\",\"id\":\"confd_dir\",\"value\":\"$apache::params::confd_dir\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"vhost_dir\",\"id\":\"vhost_dir\",\"value\":\"$apache::params::vhost_dir\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"vhost_enable_dir\",\"id\":\"vhost_enable_dir\",\"value\":\"$apache::params::vhost_enable_dir\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"mod_dir\",\"id\":\"mod_dir\",\"value\":\"$apache::params::mod_dir\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"mod_enable_dir\",\"id\":\"mod_enable_dir\",\"value\":\"$apache::params::mod_enable_dir\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"mpm_module\",\"id\":\"mpm_module\",\"value\":\"$apache::params::mpm_module\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"conf_template\",\"id\":\"conf_template\",\"value\":\"$apache::params::conf_template\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"servername\",\"id\":\"servername\",\"value\":\"$apache::params::servername\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"manage_user\",\"id\":\"manage_user\",\"value\":\"true\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"manage_group\",\"id\":\"manage_group\",\"value\":\"true\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"user\",\"id\":\"user\",\"value\":\"$apache::params::user\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"group\",\"id\":\"group\",\"value\":\"$apache::params::group\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"keepalive\",\"id\":\"keepalive\",\"value\":\"$apache::params::keepalive\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"keepalive_timeout\",\"id\":\"keepalive_timeout\",\"value\":\"$apache::params::keepalive_timeout\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"logroot\",\"id\":\"logroot\",\"value\":\"$apache::params::logroot\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"log_level\",\"id\":\"log_level\",\"value\":\"$apache::params::log_level\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"ports_file\",\"id\":\"ports_file\",\"value\":\"$apache::params::ports_file\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"server_tokens\",\"id\":\"server_tokens\",\"value\":\"OS\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"server_signature\",\"id\":\"server_signature\",\"value\":\"On\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"trace_enable\",\"id\":\"trace_enable\",\"value\":\"On\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"package_ensure\",\"id\":\"package_ensure\",\"value\":\"installed\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true}]}],\"name\":\"apache\"},{\"id\":\"dcff6bcb-5c3d-4fd8-b8cf-4c39f38c71ac\",\"type\":\"SERVICE\",\"relatedComponents\":{},\"resources\":[{\"id\":\"Puppet_1\",\"displayName\":\"Application Settings\",\"parameters\":[{\"type\":\"STRING\",\"displayName\":\"source\",\"id\":\"source\",\"value\":\"D:\\\\\\\\\\\\\\\\x64\\\\\\\\\\\\\\\\XenDesktop Setup\\\\\\\\\\\\\\\\\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"sql\",\"id\":\"sql\",\"value\":\"true\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"controller\",\"id\":\"controller\",\"value\":\"true\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"desktopstudio\",\"id\":\"desktopstudio\",\"value\":\"true\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"licenseserver\",\"id\":\"licenseserver\",\"value\":\"true\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"desktopdirector\",\"id\":\"desktopdirector\",\"value\":\"true\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"storefront\",\"id\":\"storefront\",\"value\":\"true\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true}]}],\"name\":\"citrix_xd7\"},{\"id\":\"dcff6bcb-5c3d-4fd8-b8cf-4c39f38c71ac\",\"type\":\"SERVICE\",\"relatedComponents\":{},\"resources\":[{\"id\":\"Puppet_1\",\"displayName\":\"Application Settings\",\"parameters\":[{\"type\":\"STRING\",\"displayName\":\"source\",\"id\":\"source\",\"value\":\"D:\\\\\\\\\\\\\\\\x64\\\\\\\\\\\\\\\\XenDesktop Setup\\\\\\\\\\\\\\\\\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"sql\",\"id\":\"sql\",\"value\":\"true\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"controller\",\"id\":\"controller\",\"value\":\"true\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"desktopstudio\",\"id\":\"desktopstudio\",\"value\":\"true\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"licenseserver\",\"id\":\"licenseserver\",\"value\":\"true\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"desktopdirector\",\"id\":\"desktopdirector\",\"value\":\"true\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"BOOLEAN\",\"displayName\":\"storefront\",\"id\":\"storefront\",\"value\":\"true\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true}]}],\"name\":\"citrix_xd7\"},{\"id\":\"fc83c760-e76f-403c-817c-3e01914b9b25\",\"type\":\"SERVICE\",\"relatedComponents\":{},\"resources\":[{\"id\":\"Puppet_2\",\"displayName\":\"Application Settings\",\"parameters\":[{\"type\":\"STRING\",\"displayName\":\"ensure\",\"id\":\"ensure\",\"value\":\"running\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true}]}],\"name\":\"firewall\"},{\"id\":\"fc83c760-e76f-403c-817c-3e01914b9b25\",\"type\":\"SERVICE\",\"relatedComponents\":{},\"resources\":[{\"id\":\"Puppet_2\",\"displayName\":\"Application Settings\",\"parameters\":[{\"type\":\"STRING\",\"displayName\":\"ensure\",\"id\":\"ensure\",\"value\":\"running\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true}]}],\"name\":\"firewall\"},{\"id\":\"e31b283c-7735-4430-8dd0-1f329362e47e\",\"type\":\"SERVICE\",\"relatedComponents\":{},\"resources\":[{\"id\":\"Puppet_3\",\"displayName\":\"Application Settings\",\"parameters\":[{\"type\":\"STRING\",\"displayName\":\"distribution\",\"id\":\"distribution\",\"value\":\"jdk\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"version\",\"id\":\"version\",\"value\":\"present\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"package\",\"id\":\"package\",\"value\":\"undef\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"java_alternative\",\"id\":\"java_alternative\",\"value\":\"undef\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"java_alternative_path\",\"id\":\"java_alternative_path\",\"value\":\"undef\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true}]}],\"name\":\"java\"},{\"id\":\"e31b283c-7735-4430-8dd0-1f329362e47e\",\"type\":\"SERVICE\",\"relatedComponents\":{},\"resources\":[{\"id\":\"Puppet_3\",\"displayName\":\"Application Settings\",\"parameters\":[{\"type\":\"STRING\",\"displayName\":\"distribution\",\"id\":\"distribution\",\"value\":\"jdk\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"version\",\"id\":\"version\",\"value\":\"present\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"package\",\"id\":\"package\",\"value\":\"undef\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"java_alternative\",\"id\":\"java_alternative\",\"value\":\"undef\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true},{\"type\":\"STRING\",\"displayName\":\"java_alternative_path\",\"id\":\"java_alternative_path\",\"value\":\"undef\",\"possibleValues\":[],\"possibleValuesDisplayName\":[],\"required\":true}]}],\"name\":\"java\"}],\"draft\":false}}";
        Deployment dep = MarshalUtil.fromJSON(Deployment.class, json);

        List<Object> providers = new LinkedList<>();

        WebClient userProxy = ClientUtils.getNewWebClient("http://10.255.7.134:9988/asm/", MediaType.APPLICATION_JSON, "process_service_profile", providers);

        String url = "http://10.255.7.134:9988/asm";
        userProxy.post(dep.getServiceTemplate());
    }

    @Test
    public void testIsReachable() {
        PingUtil pingUtil = new PingUtil();
        String[] ips = { "127.0.0.1", "172.18.2.100", "172.28.2.6", "172.28.2.3", "172.28.2.254" };
        for (String ip : ips) {
            System.out.println("IP " + ip + " port  7   = " + pingUtil.canConnect(ip, 7, 100));
            System.out.println("IP " + ip + " port 80   = " + pingUtil.canConnect(ip, 80, 100));
            System.out.println("IP " + ip + " reachable = " + pingUtil.isReachable(ip));
        }
    }


}
